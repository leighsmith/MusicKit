<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook V3.1//EN">

<!--
The MusicKit README file, in the original DocBook SGML source.

Edit this file, not the HTML, RTF or LaTeX output.

$Id$
-->

<!-- TODO
Add in the MusicKit icon and colour the web pages (perhaps not these below):
<BODY bgcolor="#EC5629" text="#FFFFFF" link="#C7DE1E" alink="#969FF4" vlink="#5116EC">
-->

<article>

  <artheader>
    <title>The MusicKit V5.1</title>

  <!-- 
   Ok, how do we place a logo for the document?
   <informalfigure>
    <mediaobject>
      <imageobject>
	<imagedata FileRef="MK_icon.eps" format="eps">
      </imageobject>
      <imageobject>
	<imagedata FileRef="MK_icon.png" format="png">
      </imageobject>
      <imageobject>
	<imagedata FileRef=".dir.tiff" format="tiff">
      </imageobject>
    </mediaobject>
  </informalfigure>
   -->

    <author>
      <firstname>Leigh</firstname> <othername>M.</othername> <surname>Smith</surname>
      <affiliation>
	<address>
          tomandandy
          <street>89 Greene Street</street>
          <city>New York</city>, <state>NY</state> <postcode>10012</postcode>
          <country>USA</country>
          <phone>+1-212-334-0421</phone> 
          <fax>+1-212-431-4115</fax> (Fax)
          <email>leigh@tomandandy.com</email>
        </address>
      </affiliation>
    </author>
    <revhistory>
      <revision>
	<revnumber>V1.3</revnumber>
	<date>31 July 2000</date>
      </revision>
    </revhistory>

  <abstract>
      <para>
        These are overall comments (incorporating original notes by David A. Jaffe)
        and serve as the highest level overview of the MusicKit.
      </para>
    </abstract>
  </artheader>

<sect1 id="description">
  <title>Description</title>

  <indexterm>
    <primary>MusicKit</primary>
  </indexterm>

  <para>
The MusicKit is an object-oriented software system for building
music, sound, signal processing, and MIDI applications.  It has been used
in such diverse commercial applications as music sequencers, computer
games, and document processors.  Professors and students in academia
have used the MusicKit in a host of areas, including music
performance, scientific experiments, computer-aided instruction, and
physical modeling.  The MusicKit was the first to unify the MIDI and
Music V paradigms, thus combining interaction with generality.  (Music
V, written by Max Mathews and others at Bell Labs three decades ago,
was the first widely available "computer music compiler".)
   </para>

   <para>
The NeXT MusicKit was first demonstrated at the 1988
NeXT product introduction and was bundled in NeXT software releases
1.0 and 2.0.  Beginning with NeXT's 3.0 release, the MusicKit was no
longer part of the standard NeXT software release.  Instead, it was
being distributed and supported by the Center for Computer  Research
in Music and Acoustics (CCRMA) of Stanford University. Since 1999 and
version 5.0, the most recent releases have been generously supported by
my employer, 
<ulink url="http://www.tomandandy.com">tomandandy music inc.</ulink> 
as open source to the community.
   </para>

   <para>
     The <ulink url="http://www.tomandandy.com/MusicKit">
     MusicKit Distribution</ulink>
     is a comprehensive package that
     includes on-line documentation, programming examples, utilities,
     applications and sample score documents.
</para>

<para>
Source code is available for everything, with
the exception of the NeXT hardware implementation of the low-level
sound and DSP drivers.  This means researchers and developers may
study the source or even customize the Music Kit and DSP Tools to suit
their needs.  Enhancements can be sent to 
<email>leigh@tomandandy.com</email>
to have them incorporated for future releases. Commercial software
developers may freely incorporate and adapt the software to accelerate
development of software products.  (Free commercial use of files
copyrighted by NeXT Inc. are understandably restricted to NeXTSTEP
platforms.)
</para>

    <sect2 id=features>
      <title>Feature List</title>
      <para>
The following is a partial list of the highlights of the Music Kit
provided by David Jaffe on his <link linkend=otherlinks>web-page</link>: 
</para>
      <itemizedlist>
	<listitem>
	  <para>
Extensible, high-level object-oriented framework that is a super-set of Music V and MIDI paradigms.
</para>
	</listitem>
	<listitem>
	  <para>
Representation system capable of depicting phrase-level structure such
as legato transitions.
</para>
	</listitem>
	<listitem>
	  <para>
General time management/scheduling mechanism, supporting synchronization to MIDI time code.
</para>
	</listitem>
	<listitem>
	  <para>
Efficient real-time synthesis and sound processing, including option for quadraphonic sound.
</para>
	</listitem>
	<listitem>
	  <para>
Fully-dynamic DSP resource allocation system with dynamic linking and loading, on multiple DSPs.
</para>
	</listitem>
	<listitem>
	  <para>
Complete support for multiple MIDI inputs and outputs.
</para>
	</listitem>
	<listitem>
	  <para>
Digital sound I/O from the DSP port with support for serial port devices by all popular vendors.
</para>
	</listitem>
	<listitem>
	  <para>
Non-real time mode, where the DSP returns data to the application or writes a sound file.
</para>
	</listitem>
	<listitem>
	  <para>
Suite of applications, including <application>Ensemble</application>--an interactive algorithmic composition and performance environment (including a built-in sampler) and <application>ScorePlayer</application>.
</para>
	</listitem>
	<listitem>
	  <para>
Library of instruments, including FM, wavetable, physical modeling and waveshaping synthesis.
</para>
	</listitem>
	<listitem>
	  <para>
Library of unit generators for synthesis and sound processing.
</para>
	</listitem>
	<listitem>
	  <para>
Documentation, programming examples, utilities, including a sound file
mixer, sample rate converter, etc.
</para>
	</listitem>
	<listitem>
	  <para>
ScoreFile, a textual scripting language for music. 
</para>
	</listitem>
      </itemizedlist>
    </sect2>

    <sect2 id=otherlinks>
      <title>References at Other Sites</title>

      <itemizedlist>
	<listitem>
	  <para>
             <ulink url="http://ccrma-www.stanford.edu/CCRMA/Overview/hardsoftware.html">
                CCRMA's MusicKit site
             </ulink>
	   </para>
	</listitem>
	<listitem>
	  <para>
	     <ulink url="http://www.jaffe.com/mk97.html">
                David Jaffe's (the original author) MusicKit site
             </ulink>
	   </para>
	</listitem>
      </itemizedlist>
    </sect2>

    <sect2 id="furtherdoco">
      <title>Further Documentation</title>

      <itemizedlist>
	<listitem>
	  <para>
Release notes can be found in
<filename class=directory>
./Documentation/Frameworks/MusicKit/ReleaseNotes
</filename>.
</para>
	</listitem>

	<listitem>
	  <para>
            What needs to be done is in
<filename>
./Documentation/Frameworks/MusicKit/ReleaseNotes/TODO.rtf
</filename>
</para>
	</listitem>

	<listitem>
	  <para>
The file 
<filename>
./Documentation/ChangeLog
</filename>
lists changes and is generated from the CVS logs.
</para>
	</listitem>
      </itemizedlist>
    </sect2>
    
    <sect2 id=maillist>
      <title>MusicKit Mail-list</title>
  <para>
Updates, announcements and queries are sent to the MusicKit mail-list
<email>mkdist@ccrma.stanford.edu</email>. Subscribe to the list by
sending a message to <email>listproc@ccrma.stanford.edu</email>. The
body of the message (not the Subject line) should contain this text:
</para>
      <cmdsynopsis>
	<command>subscribe mkdist</command>
	<arg choice=req><replaceable>YOURNAME</replaceable></arg>
      </cmdsynopsis>
      <para>
Don't assume nothing is being done if you don't hear anything for a while!
The maintainers are usually adding fixes/code, but full releases are
less frequent. The <link linkend=fixes>CVS repository</link> can be made available to track all updates.
</para>
    </sect2>

  </sect1>

  <sect1 id="platforms">
    <title>Supported Platforms</title>
    <para>
        The MusicKit currently runs on NeXT hardware and Intel-based hardware
        running OpenStep, Macintosh hardware running MacOsX Server and MacOsX
        (the latter currently without MIDI output), and Intel-based hardware
        running Windows 98 with Rhapsody DR2/NT or WebObjects/NT). Intel Linux
        support is achievable, planned, partially completed and looking for
        volunteers.
</para>
    <sect2 id="windows">
      <title>Windows support</title>
      <para>
After much fun with the pinnacle of Microsoft development tools, we
have the MusicKit working on Windows9X. The solution was to emulate
the Mach MIDI device driver with the core layer of DirectMusic. There
is a fairly similar match in functionality between these API with the
exception of the downloadable sound (DLS) capability of DirectMusic,
which provides a MIDI orientated sample playback API to PC
soundcards. While the future of Apple's
OpenStep/YellowBox/Cocoa/WebObjects (!) for Windows support is far
from clear, the combination of Gnu technologies of 
<ulink url="http://www.gnustep.org">GnuStep</ulink> and 
<ulink url="http://www.cygnus.com/cygwin">cygwin</ulink>
would suggest in the
near future that Apple's corporate interests will not dictate whether
applications can be deployed on either platform.
</para>
    </sect2>

    <sect2 id="linux">
      <title>Linux support</title>
      <para>
A series of stubs for
a performance framework (<filename>MKPerformSndMIDI.framework</filename>) are in place in
preparation for porting the MusicKit to Linux using the GnuStep
libraries. Further work is needed on this, please
help!
</para>
    </sect2>
  </sect1>

<sect1 id="history">
    <title>Contributors and History (As best as LMS knows)</title>

<para>
David A. Jaffe and Julius O. Smith
III at NeXT did the original design, with David coding the Objective C
and Julius most of the 56K DSP. Their original design appeared in
<citation>JaffeBoynton89</citation>.
The Ensemble application and much of the SynthPatch
library were written by Michael Mcnabb.   Douglas Fulton had primary
responsibility  for the documentation. Dana Massie, James A. Moorer,
Lee Boynton, Greg Kellogg, Douglas Keislar, Michael Minnick, Perry
Cook, John Strawn, Rob Poor and Roger Dannenberg made code and design
contributions also. Following NeXT's release of the source to Stanford
in 1994, David did the port to Intel NeXTStep and the MPU-401 MIDI and
DSP drivers. There were some other bug fix contributors (acknowledged
in code comments).
</para> 

<para>
Stephen Brandon <email>sbrandon@music.gla.ac.uk</email> did the initial
OpenStep port in early 1998 and the majority of the conversion
work. Leigh M. Smith <email>leigh@cs.uwa.edu.au</email>, now
<email>leigh@tomandandy.com</email> fixed bugs and ported the MusicKit
and MIDI drivers to Intel and PowerPC Rhapsody in late 1998 and
reorganised the packages and documentation for MacOsX Server. The port
from Rhapsody to MacOsX Server was trivial.  The frameworks were then
ported to Windows 98/NT using DirectMusic, with DirectSound interface
code contributed by SKoT McDonald <email>skot@tomandandy.com</email>. The
MusicKit now uses the SndKit, written by Stephen Brandon, rather than
the SoundKit for its sound processing. Keith Hamel tested and helped
in bug fixes for the MacOsX Server version.
</para>
</sect1>

<sect1 id="license">
<title>License</title>

<para>
The source code as distributed by Stanford (V4.2) included the
following usage message:
</para>

<blockquote>
<title>Music Kit Usage</title>
<para>
The Music Kit software is
distributed free of charge.  Copyright remains with the owner
indicated in each file.   The software may be freely incorporated into
any NeXTstep commercial application, any academic application, or any
musical composition.
</para>
<para>
We would appreciate your acknowledging the use
of the Music Kit in any academic paper, music program notes and
application documentation that use the Music
Kit.
</para>
</blockquote>

<para>
In regard of this version as indicated at the top of this file
(consitituting all changes and modifications, porting efforts and
documentation), I am continuing this usage philosophy. The latest
usage file is found in 
<filename>
./Documentation/Administration/Usage.rtf
</filename>
</para>
</sect1>

  <sect1 id="works">
    <title>What works?</title>
    <para>
The frameworks have been exercised fairly extensively and seem quite
stable. MIDI playback of scores and computed parts works. The examples
<application>MIDIFilePlayback</application> and
<command>playscorefilemidi</command> and the utility
<command>playscore</command> demonstrate these capabilities.
</para>

    <sect2 id="installation">
      <title>Installation</title>

      <para>
At the moment, there is no single make operation to build the entire
source tree. Compile either the MacOsX-Server or Windows
<filename>MKPerformSndMIDI</filename> framework, then either the
<filename>MKDSP_56k</filename> or <filename>MKDSP_Native</filename>
framework, then the <filename>MusicKit</filename> framework. They will
install into <filename
class=directory>/Local/Library/Frameworks</filename>. The
<filename>MKUnitGenerators</filename>/<filename>MKSynthPatches</filename>
framework won't compile on MacOsX-Server because the Motorola asm56000
and lnk56000 tools are missing. I've asked Apple and Motorola for a
MacOsX-Server port, why don't you also? :-) At the moment header files
are problematic. I copied over the 3.3 headers to compile against the
SoundKit and to compile the MIDI driver. These legacy headers may not
actually be needed and could be removed in time. You can get them from
the Darwin distribution of the SoundKit or just copy them from a
NeXTStep 3.3/OpenStep 4.2 system.
</para>
    </sect2>

  </sect1>

  <sect1 id="notworking">
    <title>What doesn't work?</title>

    <itemizedlist>
      <listitem>
	<para>
DSP on MacOsX-Server. Stephen
mentioned he got sound out under OS4.2. However none of the dsp
drivers have been ported from NeXTStep V3.3 (as they are all ISA bus
cards and I don't know of a PCI 56K card with published interface
specs). A more fruitful avenue seems to be to convert the unit
generators to use Apples AltiVec vector libraries and then do an open
source version of them to support other vector processors. Another
option is to convert the unit generators to the MPEG Layer 4
structured audio language SAOL <citation>SAOL</citation>
<emphasis>
(Need CMJ reference)
</emphasis>
and modify the
MKDSP framework to download to a supporting card (or do the emulation
using the native processor).
</para>
      </listitem>

      <listitem>
	<para>
There are several programs in the <filename
class=directory>Examples</filename> and <filename
class=directory>Applications</filename> directories which have yet to
be converted to the OpenStep version. Please feel free to dive in and
upgrade them!
</para>
      </listitem>

      <listitem>
	<para>
Documentation is currently in Rich Text Format (RTF). Beginning with
this README document, the documentation has begun to be converted to
the SGML DocBook DTD used by the Linux Documentation Project. Anyone
who has access to a commercial RTF to SGML converter can make a very
helpful contribution here!  The documentation is about half converted
and updated to the new naming convention and OpenStep behaviour and
needs to be completed.
</para>
      </listitem>

      <listitem>
	<para>
For this current revision the .nibs have been
upgraded to work with MacOsX and MacOsX-Server and will not load with
OpenStep 4.2. Please contact <email>leigh@tomandandy.com</email>
to obtain a set
that work with OpenStep 4.2. Future versions of the MusicKit will have
both nib sets for backward compatibility with OpenStep 4.2. Eventually
Apple's InterfaceBuilder will produce XML based nibs which should
reduce the compatibility issue.
</para>
      </listitem>
    </itemizedlist>
  </sect1>
  
  <sect1 id=downloads>
    <title>Downloads of the Distribution</title>
    <para>
       The files consist of:
    </para>

    <para>
        <variablelist>
          <varlistentry>
            <term>
              <ulink url="http://www.tomandandy.com/MusicKit/ChangeLog">ChangeLog</ulink>
            </term>
            <listitem>
              <para>
                The ChangeLog listing changes to the source (auto-generated by cvs2cl,
                also in the source tar).
              </para>
            </listitem>
          </varlistentry>
	  <varlistentry>
	    <term>
              <ulink url="http://www.tomandandy.com/MusicKit/MK_V5.1.8.s.tar.gz">MK_V5.1.8.s.tar.gz</ulink>
            </term>
	    <listitem>
	      <para>
                The source to MusicKit and nearly all utilites, applications, documentation and example code.
              </para>
	      <para>
                This is the most recent revision and patch. Older
                revisions are located in this directory for regression
                testing.
              </para>
            </listitem>
          </varlistentry>
	  <varlistentry>
	    <term>
              <ulink url="http://www.tomandandy.com/MusicKit/ZilogSCCMIDI.s.tar.gz">ZilogSCCMIDI.s.tar.gz</ulink>
            </term>
	    <listitem>
	      <para>
                The MacOsX-Server MIDI driver source.
              </para>
	    </listitem>
	  </varlistentry>
          <varlistentry>
            <term>
               <ulink url="http://www.tomandandy.com/MusicKit/DriverKitHeaders.tar.gz">DriverKitHeaders.tar.gz</ulink>
            </term>
	    <listitem>
	      <para>
                NS3.3 headers required to compile a driver on MacOsX-Server. 
              </para>
	    </listitem>
	  </varlistentry>
          <varlistentry>
            <term>
              <ulink url="http://www.tomandandy.com/MusicKit/SndKit.s.tar.gz">SndKit.s.tar.gz</ulink>
            </term>
	    <listitem>
	      <para>
                The version of the SndKit which matches the MK.
              </para>
	    </listitem>
	  </varlistentry>
        </variablelist>
      </para>

      <sect2 id=binaries>
	<title>Binaries</title>
	<para>
          Binaries for the compiled frameworks for various operating
          systems reside:
        </para>

        <para>
	<variablelist>
	  <varlistentry>
	    <term>
            <ulink url="http://www.tomandandy.com/MusicKit/binaries/MacOsX-Server/MK-5.1.8.pkg.tar">MK-5.1.8.pkg.tar</ulink>
            </term>
	    <listitem>
	      <para>
              The MacOsX-Server frameworks (including the SndKit).
              </para>
	    </listitem>
	  </varlistentry>
          <varlistentry>
            <term>
              <ulink url="http://www.tomandandy.com/MusicKit/binaries/MacOsX-Server/ZilogSCCMIDI.b.tar.gz">ZilogSCCMIDI.b.tar.gz</ulink>
            </term>
	    <listitem>
	      <para>
                The MIDI driver binary for SCC UARTs in the Mac.
              </para>
	    </listitem>
	  </varlistentry>
        </variablelist>
      </para>
    </sect2>
  </sect1>

  <sect1 id=fixes>
    <title>Contributing Fixes</title>
    <para>
Please! I am maintaining changes
via a closed CVS system 
(<systemitem class="systemname">cvs.tomandandy.com</systemitem>)
at the moment. If you
send me <email>leigh@tomandandy.com</email>
changes I will incorporate them and
check them in. If you are planning to do major work, I can provide
access to the CVS server.
</para>
  </sect1>

  <bibliography>
    <bibliomixed>
    <bibliomset relation=article>
      <authorgroup>
	  <author>
	    <firstname>David</firstname> <othername>A.</othername> <surname>Jaffe</surname>
	  </author>
	  <author>
	    <firstname>Lee</firstname> <othername>R.</othername> <surname>Boynton</surname>
	  </author>
	</authorgroup>
      <title role=article>An Overview of the Sound and Music Kits for the NeXT Computer</title>
Computer Music Journal
      <volumenum>13</volumenum>(<issuenum>2</issuenum>)
      <pubdate>1989</pubdate>
      <pagenums>48-55</pagenums>
      <publishername>MIT Press</publishername>
    </bibliomset>
  </bibliomixed>
  </bibliography>

</article>

<!--
Local Variables:
time-stamp-format:"%02d/%02m/%04y"
time-stamp-line-limit:100
time-stamp-start:"<date>"
time-stamp-end:"</date>"
End:
-->

